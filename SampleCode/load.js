
const data = {
"data": {},
"content": [
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "7:30 AM",
"nodeType": "text"
}
],
"nodeType": "heading-2"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "I tend to move slowly in the morning, but I try to get some yoga and breakfast in there. I used to be a breakfast-on-the-run person, but ever since I got married, I’ve been fortunate enough that my husband is making breakfast now, so I get some solid food in the morning. It’s really nice.",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "9 AM",
"nodeType": "text"
}
],
"nodeType": "heading-2"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "Around 9, I walk over to the shop. It takes me like half an hour or 45 minutes to get there. Sometimes I’ll pop into a bakery on the way if I didn’t get breakfast. I’ll listen to a podcast or just take some time to reflect and be myself and enjoy my walk there.",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "10 AM ",
"nodeType": "text"
}
],
"nodeType": "heading-2"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "We start putting out the jewelry right away. We pack it all up every night, and in the morning, we re-do the display. The good thing is that it keeps things fresh and gives me the chance to re-evaluate on a daily basis. I’ll do this with one or two team members in the shop. We usually finish that up a little before 11. ",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "11 AM",
"nodeType": "text"
}
],
"nodeType": "heading-2"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "When the shop opens up, I’ll head to my desk to check in on our projects. We have a project management board designs or samples. I’ll check in on that for any ASAP things as well as anything I can delegate to my team.",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "We often do custom meetings in the evening, and if I need to do something to prep for that, like making samples or pulling designs to show clients, I’ll do that in the morning. Sometimes clients come in with their own heirloom stones for us to work with. I love when we get to work with those, but I also love ordering stones for them to look at after we get a sense for what they’re thinking in terms of budget and quality of stone. ",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "We work with a vendor in New York primarily who specializes in antique stones. When stones are FedExed to us, I’ll get to check them out and look at the different qualities under a loupe. That’s a cool part of my day. We’ll look at the fire and the spread of the stone. The fire is how all of the four c’s (cut, clarity, carat, and color) come together to give the stone its fire and its sparkle and its life. The spread is how much surface area the stone has in comparison to the carat, which is the weight of the stone. I look at how all of those things come together and which stone will work for the client’s project.",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "1:30 PM",
"nodeType": "text"
}
],
"nodeType": "heading-2"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "I’ll have a quick lunch at 1:30 or so. I have recently become obsessed with Amy’s organic burritos. I just don’t have to think about it, so on a lot of days, that’s my go-to. ",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "On Thursdays, we do team lunches. We do takeout from Flour and the three of us will eat in the shop and catch up about our personal lives and what’s going on in the world. We try to check in with each other as humans instead of just work. It’s good to look at something besides work during the workday. ",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "2 PM:",
"nodeType": "text"
}
],
"nodeType": "heading-2"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "In the afternoon, I might be working on any number of things. It could be designing our collection, whether that’s engagement rings, wedding bands, earrings or necklaces. All of our jewelry is made here, and I make most of it myself. I have more help with the production pieces like the earrings and necklaces.",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "In the afternoon, I’m also working with walk-in clients who walk into the shop and have questions. Or, sometimes I’ll chat with vendors about material orders and things like that, the metals and diamonds, for example. I’ll also be speaking with designers we carry in the shop about orders. Then there’s also the general operations and admin stuff, looking over our books and taxes, statements, things like that. I have help with that stuff, but I also need to have my eyes on it so I know what’s going on.",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "I also have my hands in the marketing and press side of things, whether it’s working on an Instagram post or approving one, or working on an email for clients, or checking in with magazines who are shooting our pieces.",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "6 PM",
"nodeType": "text"
}
],
"nodeType": "heading-2"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "The shop technically closes at 6 PM to the public. Often, we will have a client meeting then that starts at 6. It depends on the project, but sometimes we’ll see a couple come in together, or just the guy, or just the girl. Every once in a while there is an entourage of moms, aunts, and friends, so it can be a small gathering. We’ll chat about the project, and again, it depends on where we’re at: if it’s a first meeting, we’re trying to get a sense for needs, or if it’s further in, we’ll be finalizing design decisions. We make mock-ups of pieces so that there’s a visual representation of what the final piece might look like. Sometimes, the intended might have a Pinterest board so we’ll take a look at that too. A lot of different parts come together. It’s really fun to teach people about stone qualities and show them how those qualities relate to the stones we’re looking at, whether it’s one of ours or an heirloom stone that they’ve brought in. If the intended is there, we’ll kind of place them on her hand so she can see how they’ll look on, and we’ll also look at the stones under a jeweller’s loupe. It’s exciting to point out unique characteristics of the stone that way. I just love diving into the stone. ",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "It’s amazing what we get to be a part of. It’s so sweet and so romantic and touching when people are planning things for their partners, or if they come in together with their partner. This is one of the first steps in their life together, and it’s a really special sentimental thing. People definitely get choked up in the shop.",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "7 PM",
"nodeType": "text"
}
],
"nodeType": "heading-2"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "Around 7, a client meeting will usually end. We’ll pack everything up and I’ll walk home. ",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "8 PM",
"nodeType": "text"
}
],
"nodeType": "heading-2"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "I’ll usually cook dinner at home with my husband, or sometimes meet friends out for dinner or drinks. If we’re not going out, I’ll try to get a run in when I get home.",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "9:30 PM",
"nodeType": "text"
}
],
"nodeType": "heading-2"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [],
"value": "I eat a late lunch, so I eat dinner really late at 9:30 or 10. Afterwards, we’ll have a glass of wine and or play cards or Scrabble. We’re definitely not TV watchers, which I’m glad about. We hang, we chat. One cool thing is that we live in an artist building in Fort Point, so you have to be artist certified to live here. It’s zoned both commercially and residentially, so I do have a home studio. Everyone in our building is connected to the arts in some way: it can be dance, writing, performance arts, etc. Sometimes there’s an impromptu gathering in our lobby, so that’s also how our night might end. ",
"nodeType": "text"
}
],
"nodeType": "paragraph"
},
{
"data": {},
"content": [],
"nodeType": "hr"
},
{
"data": {},
"content": [
{
"data": {},
"marks": [
{
"type": "italic"
}
],
"value": "Browse Hughes's jewelry on her ",
"nodeType": "text"
},
{
"data": {
"uri": "http://www.sophiehughes.com/"
},
"content": [
{
"data": {},
"marks": [
{
"type": "italic"
}
],
"value": "website",
"nodeType": "text"
}
],
"nodeType": "hyperlink"
},
{
"data": {},
"marks": [
{
"type": "italic"
}
],
"value": " and swoon over her custom pieces, often pictured on ",
"nodeType": "text"
},
{
"data": {
"uri": "https://www.instagram.com/sophiehughesjewelry/"
},
"content": [
{
"data": {},
"marks": [
{
"type": "italic"
}
],
"value": "Instagram",
"nodeType": "text"
}
],
"nodeType": "hyperlink"
},
{
"data": {},
"marks": [
{
"type": "italic"
}
],
"value": ". ",
"nodeType": "text"
}
],
"nodeType": "paragraph"
}
],
"nodeType": "document"
};

const KEY_CONTENT = 'content';
const KEY_NODE_TYPE = 'nodeType';
const KEY_FIRST_H2 = 'firsth2';
const KEY_LAST_PARA = 'lastPara';
const KEY_LEFT_WINDER = 'leftWinder';
const KEY_PARAS_IN_SECTION = 'parasInSection';

function wrapParas( parasInSection, left, nodes ) {
  if (parasInSection.length > 0) {
    const pWrap = `<div class="w-full mt-5">${ parasInSection.join('') }</div>`;
    nodes.push( pWrap );

    if (left !== null) {
      const h2laterExtraLeft = `
      <div class="grid grid-cols-6">
        <div class="col-start-2 col-span-2 border-t-4 border-blue-700"></div>
      </div>
      <div class="grid grid-col-2">
        <div class="col-start-2 border-l-4 border-blue-700 h-20 -mt-1"></div>
      </div>
      `; 
      const h2laterExtraRite = `
      <div class="grid grid-cols-6">
        <div class="col-start-4 col-span-2 border-t-4 border-blue-700"></div>
      </div>
      <div class="grid grid-col-2">
        <div class="col-start-2 border-l-4 border-blue-700 h-20 -mt-1"></div>
      </div>
      `;
      nodes.push( left ? h2laterExtraLeft : h2laterExtraRite );
    }
  }
}


function prepContent( dataContent ) {
  const useContent = [];

  var firsth2 = true;
  for (const [index, value] of dataContent.entries()) {
    if (value.content.length > 0) {
      const nodeType = value.nodeType;
      const content = value.content[0].value;

      const obj = {
        [KEY_CONTENT]: content,
        [KEY_NODE_TYPE]: nodeType
      };

      if (nodeType == 'heading-2' && firsth2) {
        obj[KEY_FIRST_H2] = true;
        firsth2 = false;
      }

      useContent.push(obj);
    }
  }

  var nextParaIsLastPara = false;
  for (var i=useContent.length-1; i >= 0; i--) {
    const content = useContent[i];
    const nodeType = content[KEY_NODE_TYPE];
    if (nodeType == 'heading-2') {
      nextParaIsLastPara = true;
    }
    else if (nodeType == 'paragraph') {
      content[KEY_LAST_PARA] = nextParaIsLastPara;
      nextParaIsLastPara = false;
    }
  }

  var leftWinder = true;
  for (const content of useContent) {
    if (content[KEY_NODE_TYPE] == 'paragraph'
        && content[KEY_LAST_PARA]) {
      content[KEY_LEFT_WINDER] = leftWinder;
      leftWinder = !leftWinder;
    }
  }

  return useContent;
}

const nodes = [];

const useContent = prepContent( data.content );
console.log( useContent );

const lastParaData = {
  [KEY_PARAS_IN_SECTION]: [],
  [KEY_LEFT_WINDER]: false
};

for (const d of useContent) {
  const content = d[KEY_CONTENT];
  const nodeType = d[KEY_NODE_TYPE];
  if (nodeType == 'heading-2') {

    wrapParas(
      lastParaData[KEY_PARAS_IN_SECTION],
      lastParaData[KEY_LEFT_WINDER], nodes
    );
    lastParaData[KEY_PARAS_IN_SECTION].length = 0;

    const h2 = `
    <div class="w-full m-auto">
      <h2
        style="font-family: 'Copse';"
        class="m-auto text-3xl text-blue-700 text-center"
      >
        ${ content }
      </h2>
    </div>`;

    nodes.push( h2 );
  }
  else if (nodeType == 'paragraph') {

    const pClass = 'w-8/12 m-auto font-serifs leading-relaxed pl-5 pr-5 mb-5';
    const pClassLastLeft = 'w-8/12 m-auto font-serifs leading-relaxed pl-5 pr-5 border-l-4 border-blue-700 pb-5';
    const pClassLastRite = 'w-8/12 m-auto font-serifs leading-relaxed pl-5 pr-5 border-r-4 border-blue-700 pb-5';
    const pClassOption = d[KEY_LAST_PARA] ? (d[KEY_LEFT_WINDER] ? pClassLastLeft : pClassLastRite) : pClass;

    const p = `
        <p
          class="${ pClassOption }"
        >
          ${ content }
        </p>
    `;

    lastParaData[KEY_PARAS_IN_SECTION].push( p );
    lastParaData[KEY_LEFT_WINDER] = d[KEY_LEFT_WINDER];
  }
}

wrapParas( lastParaData[KEY_PARAS_IN_SECTION], null, nodes );
lastParaData[KEY_PARAS_IN_SECTION].length = 0;

const nodesTxt = nodes.join('');
const $app = document.getElementById('app');
$app.innerHTML = nodesTxt;

console.log( nodesTxt );
